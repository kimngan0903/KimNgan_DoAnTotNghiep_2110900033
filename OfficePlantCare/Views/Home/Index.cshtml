@{
    ViewData["Title"] = "Trang chủ";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var banners = ViewData["Banners"] as List<OfficePlantCare.Models.Banner>;
    var services = ViewData["Services"] as List<OfficePlantCare.Models.Service>;
    var latestNews = ViewData["News"] as List<OfficePlantCare.Models.News>;
    // var roleId = User.Claims.FirstOrDefault(c => c.Type == "Role")?.Value;
}

<!-- ##### Hero Area Start ##### -->
<section class="hero-area">
    <div class="hero-post-slides owl-carousel">
        @if (banners != null && banners.Any())
        {
            @foreach (var banner in banners)
            {
                <div class="single-hero-post bg-overlay">
                    <div class="slide-img bg-img" style="background-image: url('@banner.Image');"></div>
                    <div class="container h-100">
                        <div class="row h-100 align-items-center">
                            <div class="col-12">
                                <div class="hero-slides-content text-center">
                                    <h2>@banner.Title</h2>
                                    <p>@banner.Description</p>
                                    <div class="welcome-btn-group">
                                        <a href="~/services" class="btn alazea-btn mr-30">ĐẶT DỊCH VỤ</a>
                                        <a href="~/contact" class="btn alazea-btn mr-30">LIÊN HỆ</a>
                                        @*<a href="#" class="btn alazea-btn active">LIÊN HỆ: 0373 993 662</a>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <p class="text-center text-danger">Không có banner nào để hiển thị.</p>
        }
    </div>
</section>

<!-- ##### Hero Area End ##### -->
<!-- ##### Service Area Start ##### -->
<section class="our-services-area bg-gray section-padding-100-0">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <!-- Section Heading -->
                <div class="section-heading text-center">
                    <h2 style="color: #48c023; font-weight: bold">DỊCH VỤ CỦA CHÚNG TÔI</h2>
                    <p>Xanh mát mỗi ngày – Nâng tầm không gian, truyền cảm hứng thành công!</p>
                </div>
            </div>
        </div>

        <div class="row justify-content-between">
            <div class="col-12 col-lg-5">
                <div class="alazea-service-area mb-100">

                    <!-- Single Service Area -->
                    <div class="single-service-area d-flex align-items-center wow fadeInUp" data-wow-delay="100ms">
                        <!-- Icon -->
                        <div class="service-icon mr-30">
                            <img src="img/core-img/s1.png" alt="Chăm sóc cây cảnh">
                        </div>
                        <!-- Content -->
                        <div class="service-content">
                            <h5>Chăm sóc cây cảnh</h5>
                            <p>Giữ cho cây xanh của bạn luôn tươi tốt với dịch vụ tưới nước, cắt tỉa và bổ sung dinh dưỡng chuyên nghiệp.</p>
                        </div>
                    </div>

                    <!-- Single Service Area -->
                    <div class="single-service-area d-flex align-items-center wow fadeInUp" data-wow-delay="300ms">
                        <!-- Icon -->
                        <div class="service-icon mr-30">
                            <img src="img/core-img/s2.png" alt="Làm sạch không gian xanh">
                        </div>
                        <!-- Content -->
                        <div class="service-content">
                            <h5>Làm sạch không gian xanh</h5>
                            <p>Dọn dẹp lá rụng, rêu mốc và vệ sinh chậu cây, giúp không gian làm việc luôn trong lành và chuyên nghiệp.</p>
                        </div>
                    </div>

                    <!-- Single Service Area -->
                    <div class="single-service-area d-flex align-items-center wow fadeInUp" data-wow-delay="500ms">
                        <!-- Icon -->
                        <div class="service-icon mr-30">
                            <img src="img/core-img/s3.png" alt="Cắt tỉa & tạo dáng cây">
                        </div>
                        <!-- Content -->
                        <div class="service-content">
                            <h5>Cắt tỉa & tạo dáng cây</h5>
                            <p>Tạo hình cây cảnh theo phong cách hiện đại, duy trì vẻ đẹp tự nhiên và hài hòa với không gian văn phòng.</p>
                        </div>
                    </div>

                </div>
            </div>

            <div class="col-12 col-lg-6">
                @*                 <div class="alazea-video-area bg-overlay mb-100">
                *@                    <img src="https://media2.giphy.com/media/rLuTf4Te8ZQNzMHzjz/giphy.gif?cid=6c09b952c1mfs81pv3rpoadj71c86jthw3z84col9czo5hl3&ep=v1_stickers_search&rid=giphy.gif&ct=s" alt="">
                @*  <a href="https://www.youtube.com/embed/ixk2ZkwlSrA" class="video-icon">
                <i class="fa fa-play" aria-hidden="true"></i>
                </a> *@
            </div>
        </div>
    </div>
</section>
<!-- ##### Service Area End ##### -->
<!-- ##### About Area Start ##### -->
<section class="about-us-area section-padding-100-0">
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-12 col-lg-5">
                <!-- Section Heading -->
                <div class="section-heading">
                    <h2 style="color: #48c023; font-weight: bold">VỀ CHÚNG TÔI</h2>
                    <p>Chuyên gia trong lĩnh vực chăm sóc cây cảnh văn phòng.</p>
                </div>
                <p>Chúng tôi mang đến giải pháp xanh bền vững cho không gian làm việc, giúp cây cảnh luôn tươi tốt, nâng cao chất lượng môi trường và tạo cảm hứng sáng tạo.</p>

                <!-- Progress Bar Content Area -->
                <div class="alazea-progress-bar mb-50">
                    @{
                        var servicePercentages = ViewData["ServicePercentages"] as List<dynamic>;
                        var serviceIndex = 1;

                        if (servicePercentages == null || !servicePercentages.Any())
                        {
                            <p>Chưa có dữ liệu về các dịch vụ được sử dụng.</p>
                        }
                        else
                        {
                            foreach (var service in servicePercentages)
                            {
                                <div class="single_progress_bar">
                                    <p>@service.ServiceName</p>
                                    <div id="bar@(serviceIndex)" class="barfiller">
                                        <div class="tipWrap">
                                            <span class="tip"></span>
                                        </div>
                                        <span class="fill" data-percentage="@service.Percentage"></span>
                                    </div>
                                </div>
                                serviceIndex++;
                            }
                        }
                    }
                </div>
            </div>

            <div class="col-12 col-lg-6">
                <div class="alazea-benefits-area">
                    <div class="row">
                        <!-- Single Benefits Area -->
                        <div class="col-12 col-sm-6">
                            <div class="single-benefits-area">
                                <img src="img/core-img/b1.png" alt="Sản phẩm chất lượng">
                                <h5>Sản phẩm chất lượng</h5>
                                <p>Cây xanh được tuyển chọn kỹ lưỡng, đảm bảo sức khỏe tốt và phù hợp với môi trường văn phòng.</p>
                            </div>
                        </div>

                        <!-- Single Benefits Area -->
                        <div class="col-12 col-sm-6">
                            <div class="single-benefits-area">
                                <img src="img/core-img/b2.png" alt="Dịch vụ chuyên nghiệp">
                                <h5>Dịch vụ chuyên nghiệp</h5>
                                <p>Đội ngũ chuyên gia tận tâm, chăm sóc cây định kỳ, tư vấn giải pháp tối ưu cho khách hàng.</p>
                            </div>
                        </div>

                        <!-- Single Benefits Area -->
                        <div class="col-12 col-sm-6">
                            <div class="single-benefits-area">
                                <img src="img/core-img/b3.png" alt="100% tự nhiên">
                                <h5>100% tự nhiên</h5>
                                <p>Sử dụng phương pháp chăm sóc thân thiện với môi trường, giúp cây phát triển tự nhiên và bền vững.</p>
                            </div>
                        </div>

                        <!-- Single Benefits Area -->
                        <div class="col-12 col-sm-6">
                            <div class="single-benefits-area">
                                <img src="img/core-img/b4.png" alt="Bảo vệ môi trường">
                                <h5>Bảo vệ môi trường</h5>
                                <p>Góp phần giảm thiểu khí CO2, tạo không gian làm việc trong lành, nâng cao sức khỏe cho nhân viên.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="border-line"></div>
            </div>
        </div>
    </div>
</section>

<!-- ##### About Area End ##### -->
<!-- ##### Product Area Start ##### -->
<section class="new-arrivals-products-area bg-gray section-padding-100">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <!-- Section Heading -->
                <div class="section-heading text-center">
                    <h2 style="color: #48c023; font-weight: bold">DỊCH VỤ MỚI NHẤT</h2>
                    <p>Chúng tôi mang đến những dịch vụ chăm sóc cây cảnh mới nhất</p>
                </div>
            </div>
        </div>

        <div class="row">
            @if (services != null && services.Any())
            {
                @foreach (var service in services.Take(4)) // Chỉ lấy 4 dịch vụ đầu tiên
                {
                    <div class="col-12 col-sm-6 col-lg-3">
                        <div class="single-product-area mb-50 wow fadeInUp" data-wow-delay="100ms">
                            <!-- Product Image -->
                            <div class="product-img">
                                <a href="/services/details/@service.ServiceId">
                                    <img src="@service.Image" alt="@service.ServiceName" class="img-fluid" style="height: 200px">
                                </a>
                            </div>
                            <!-- Product Info -->
                            <div class="product-info mt-15 text-center">
                                <a href="/services/details/@service.ServiceId">
                                    <p>@service.ServiceName</p>
                                </a>
                                <a href="/services/details/@service.ServiceId" class="btn alazea-btn">ĐẶT NGAY</a>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12 text-center">
                    <p class="text-muted">Hiện chưa có dịch vụ nào.</p>
                </div>
            }

            <div class="col-12 text-center">
                <a asp-controller="Services" asp-action="Index" class="btn alazea-btn">Xem tất cả</a>
            </div>
        </div>
    </div>
</section>
<!-- ##### Product Area End ##### -->
<!-- ##### Blog Area Start ##### -->
<section class="alazea-blog-area section-padding-100-0">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <!-- Section Heading -->
                <div class="section-heading text-center">
                    <h2 style="color: #48c023; font-weight: bold">TIN MỚI NHẤT</h2>
                    <p>Cập nhật nhanh chóng những tin tức mới nhất về cây cảnh và nghệ thuật tạo các dáng cây.</p>
                </div>
            </div>
        </div>

        <div class="row justify-content-center">
            @foreach (var news in latestNews.Take(3))
            {
                <!-- Single Blog Post Area -->
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="single-blog-post mb-4">
                        <div class="post-thumbnail mb-3">
                            <a href="@Url.Action("Details", "News", new { id = news.NewsId })">
                                <img src="@news.Image" alt="@news.Title" style="width: 100%; height: 300px">
                            </a>
                        </div>
                        <div class="post-content text-center">
                            <a href="@Url.Action("Details", "News", new { id = news.NewsId })" class="post-title">
                                <h5>
                                    @news.Title
                                </h5>
                            </a>
                            <div class="post-meta" style="display: flex; align-items: center; gap: 20px;">
                                <span style="display: flex; align-items: center; gap: 5px;">
                                    <i class="fa-solid fa-clock text-success"></i>
                                    <span> @news.CreatedDate?.ToString("dd MMM yyyy")</span>
                                </span>  /
                                <span style="display: flex; align-items: center; gap: 5px;">
                                    <i class="fa fa-user text-success"></i>
                                    <span> Kim Ngân</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>
<br />
<br />
<br />
<!-- ##### Blog Area End ##### -->
<!-- ##### Subscribe Area Start ##### -->
<section class="subscribe-newsletter-area" style="background-image: url(img/bg-img/subscribe.png);">
    <div class="container">
        <div class="row align-items-center justify-content-between text-center">
            <div class="col-12 col-lg-5">
                <!-- Section Heading -->
                <div class="section-heading mb-3">
                    <h2>Liên lạc với chúng tôi</h2>
                    <p>Liên hệ ngay để nhận tư vấn & ưu đãi hấp dẫn!</p>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="subscribe-form">
                    <form asp-action="SubmitContact" asp-controller="Home" method="post" class="d-flex justify-content-center">
                        <input type="email" name="subscribe-email" id="subscribeEmail" class="form-control me-2"
                               placeholder="Nhập email của bạn" required>
                        <button type="submit" class="btn alazea-btn">Gửi</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Subscribe Side Thumbnail -->
    <div class="subscribe-side-thumb wow fadeInUp" data-wow-delay="500ms">
        <img class="first-img" src="img/core-img/leaf.png" alt="">
    </div>
</section>
<!-- ##### Subscribe Area End ##### -->
<!-- ##### Contact Area Start ##### -->
<section class="contact-area section-padding-100-0">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-12 col-lg-5">
                <!-- Section Heading -->
                <div class="section-heading">
                    <h2>Liên hệ với chúng tôi</h2>
                    <p>Hãy để lại thông tin, chúng tôi sẽ liên hệ với bạn sớm nhất!</p>
                </div>
                <!-- Contact Form Area -->
                <div class="contact-form-area mb-100">
                    <form asp-action="SubmitContact" asp-controller="Home" method="post">
                        <div class="row">
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" name="Name" placeholder="Họ và tên" required>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <input type="email" class="form-control" name="Email" placeholder="Email" required>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" name="Phone" placeholder="Số điện thoại">
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" name="Address" placeholder="Địa chỉ">
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <textarea class="form-control" name="Message" cols="30" rows="5" placeholder="Nội dung liên hệ" required></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn alazea-btn mt-15">Gửi yêu cầu</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Google Maps -->
            <div class="col-12 col-lg-6">
                <div class="map-area mb-100">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3725.6160763624166!2d105.75427781046643!3d20.967927589785322!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x313452e043a3bced%3A0xcef252b7398eaa52!2zTmfDtSAzNiBMw6ogVHLhu41uZyBU4bqlbiwgTGEgS2jDqiwgSMOgIMSQw7RuZywgSMOgIE7hu5lpLCBWaWV0bmFt!5e0!3m2!1sen!2s!4v1741342855923!5m2!1sen!2s"
                            width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ##### Contact Area End ##### -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
@section Scripts {
    <script>
        $(document).ready(function () {
            // Kiểm tra và hiển thị thông báo thành công
            var successMessage = '@Html.Raw(System.Web.HttpUtility.JavaScriptStringEncode(TempData["SuccessMessage"]?.ToString() ?? ""))';
            if (successMessage) {
                Swal.fire({
                    icon: 'success',
                    title: 'Thành công!',
                    text: successMessage,
                    confirmButtonText: 'OK',
                    confirmButtonColor: '#1ABC9C'
                });
            }
        });
        document.addEventListener('DOMContentLoaded', function () {
            const bars = document.querySelectorAll('.barfiller');

            bars.forEach(bar => {
                const fill = bar.querySelector('.fill');
                const tip = bar.querySelector('.tip');
                const percentage = fill.getAttribute('data-percentage') || '0';

                // Đảm bảo fill hiển thị đúng
                fill.style.width = percentage + '%';
                fill.style.background = 'rgb(112, 199, 69)';

                // Hiển thị phần trăm trong tip
                if (tip) {
                    tip.textContent = percentage + '%';
                    tip.style.left = '0'; // Đặt tip ở bên trái thanh
                    tip.style.right = 'auto';
                    tip.style.transform = 'translateX(-50%)'; // Căn giữa tip ở bên trái
                }

                // Nếu dùng barfiller, khởi tạo với các tùy chọn
                if (typeof jQuery !== 'undefined' && jQuery.fn.barfiller) {
                    $(bar).barfiller({
                        barColor: 'rgb(112, 199, 69)', // Màu xanh
                        tooltip: true,
                        duration: 2000, // Hiệu ứng 2 giây
                        onComplete: function () {
                            if (tip) {
                                tip.textContent = percentage + '%'; // Đảm bảo phần trăm hiển thị
                            }
                        }
                    });
                }
            });
        });
    </script>
}
